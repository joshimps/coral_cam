#include "rclcpp/rclcpp.hpp"
#include "std_msgs/msg/bool.hpp"

#include <functional>
#include <memory>
#include <rgpio.h>
#include <chrono> 
using namespace std::chrono_literals;


class Button : public rclcpp::Node{
    public:
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Constructors and Destructors                                                                          //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        Button(int buttonPinNumber);
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Public Methods                                                                                        //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        
    private:
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Callbacks                                                                                             //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        void timerCallback();
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Private Methods                                                                                       //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////

        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Node,Timers, Publishers and Subscribers                                                                      //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        rclcpp::Publisher<std_msgs::msg::Bool>::SharedPtr buttonPressedPublisher_;
        rclcpp::TimerBase::SharedPtr timer_;
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Constants                                                                                             //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        const int lflags_ = 0;
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Variables                                                                                             //
        //////////////////////////////////////////////////////////////////////////////////////////////////////////
        int gpioHandle_;
        int buttonPinNumber_;
        std_msgs::msg::Bool buttonPressedMessage_;

};  