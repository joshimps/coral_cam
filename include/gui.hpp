#include "rclcpp/rclcpp.hpp"
#include "sensor_msgs/msg/image.hpp"
#include "std_msgs/msg/float64.hpp"

#include <QApplication>
#include <QMainWindow>
#include <QWidget>
#include <QPushButton>
#include <QImage>
#include <QLabel>
#include <QVBoxLayout>
#include <QHBoxLayout>
#include <QPixmap>
#include <QString>

#include <string>
#include <bits/stdc++.h> 

namespace coral_cam{
    class Gui : public QWidget, public rclcpp::Node{
        Q_OBJECT
        public:
            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Constructors and Destructors                                                                          //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////
               
                Gui(QWidget* parent);
                ~Gui();
            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Public Methods                                                                                        //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////
            
        private:
        
            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Callbacks                                                                                             //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////
            void cameraFrameRecieved(sensor_msgs::msg::Image msg);
            void centroidFrameRecieved(std_msgs::msg::Float64 msg);

            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Private Methods                                                                                       //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////

            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Node, Publishers and Subscribers                                                                      //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////
            rclcpp::Subscription<sensor_msgs::msg::Image>::SharedPtr imageSubscriber_;
            rclcpp::Subscription<std_msgs::msg::Float64>::SharedPtr centroidSubscriber_;

            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Constants                                                                                             //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////

            ////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Variables                                                                                             //
            //////////////////////////////////////////////////////////////////////////////////////////////////////////

            QVBoxLayout* mainLayout_;
            QHBoxLayout* topLayout_;
            QHBoxLayout* bottomLayout_;
            QLabel* batteryLabel_;
            QLabel* pamLabel_;
            QLabel* centroidLabel_;
            QLabel* realsenseCameraFeed_;
            
    };
}
